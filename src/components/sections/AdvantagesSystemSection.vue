<template>
  <section class="advantages-system-section">
    <div class="advantages-system-section__container container">
      <h3 class="advantages-system-section__title">
        <i class="u-icon u-icon-arrow-down-right"></i>

        –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã
      </h3>

      <div class="advantages-system-section__items">
       <div 
          v-for="(item, index) in items"
          :ref="el => (itemsRefs[index] = el as HTMLElement | null)"
          :key="item.num"
          class="advantages-system-section__item"
        >
          <h1 class="green">
            {{ item.title }}
          
            <sup class="black">{{ item.num }}</sup>
          </h1>

          <h3>
            {{ item.description }}
          </h3>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useGsap } from '@libs/gsap'

interface Item {
  num: string
  title: string
  description: string
}

const { gsap } = useGsap()

const items: Item[] = [
  {
    num: '01',
    title: '–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω—è Enterprise',
    description: '–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—á–∞—Ç—å—é'
  },
  {
    num: '02',
    title: '–ú—É–ª—å—Ç–∏–≤–µ–Ω–¥–æ—Ä–Ω–æ—Å—Ç—å',
    description: '–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –ú–§–£'
  },
  {
    num: '03',
    title: '–û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç',
    description: '–í—Ö–æ–¥–∏—Ç –≤ —Ä–µ–µ—Å—Ç—Ä —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ü–û, —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –§–°–¢–≠–ö'
  },
  {
    num: '04',
    title: '–ì–∏–±–∫–∞—è –∏ –≥–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
    description: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –ø–æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑—á–∏–∫–∞'
  },
]

const itemsRefs = ref<(HTMLElement | null)[]>([])

onMounted(() => {
  const elements = itemsRefs.value;

  elements.forEach((el) => {
    gsap.fromTo(
      el,
      {
        opacity: 0,
        y: 120,
        scale: 0.95,
      },
      {
        opacity: 1,
        y: 0,
        scale: 1,
        ease: "power4.out",
        scrollTrigger: {
          trigger: el,
          start: "top 85%",   // üëà —ç–ª–µ–º–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–æ—Ö–æ–¥–∏—Ç —Å–Ω–∏–∑—É
          end: "top 55%",     // üëà —É —ç–ª–µ–º–µ–Ω—Ç–∞ –µ—Å—Ç—å ¬´–ø—É—Ç—å¬ª
          scrub: true,
        },
      }
    );
  });
});
</script>

<style lang="scss">
.advantages-system-section {
  width: 100%;
  height: 100%;
  position: relative;
  min-height: 100vh;
  overflow: hidden;

  &__title {
    display: flex;
    gap: 30px;
    align-items: center;
  }

  &__item {
    display: flex;
    align-items: center;
    padding: 60px 0;
    position: relative;

    &:last-child {
    &::after {
      content: '';
      height: 1px;
      width: 100%;
      background-image: linear-gradient(
        to right,
        $color-black 50%,
        transparent 0
      );
      background-size: 8px 2px;
      background-repeat: repeat-x;
      margin: 30px 0;
      position: absolute;
      left: 0;
      bottom: 0;
    }
    }

    &::before {
      content: '';
      height: 1px;
      width: 100%;
      background-image: linear-gradient(
        to right,
        $color-black 50%,
        transparent 0
      );
      background-size: 8px 2px;
      background-repeat: repeat-x;
      position: absolute;
      left: 0;
      top: 0;
    }

    h1 {
      display: flex;
    }

    h3 {
      max-width: 436px;
      width: 100%;
      margin-left: auto;
    }
  }

  &__items {
    display: flex;
    flex-direction: column;
    margin-top: 100px;
  }
}
</style>